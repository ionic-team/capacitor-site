{"title":"Migrating from Cordova to Capacitor","description":"Migrating from Cordova to Capacitor","url":"/docs/cordova/migrating-from-cordova-to-capacitor","contributors":["dotnetkow"],"headings":[{"id":"migrating-a-web-app-using-cordova-to-capacitor","level":1,"text":"Migrating a Web App Using Cordova to Capacitor"},{"id":"add-capacitor","level":2,"text":"Add Capacitor"},{"id":"build-your-web-app","level":3,"text":"Build your Web App"},{"id":"add-platforms","level":3,"text":"Add Platforms"},{"id":"splash-screens-and-icons","level":2,"text":"Splash Screens and Icons"},{"id":"migrate-plugins","level":2,"text":"Migrate Plugins"},{"id":"remove-cordova-plugin","level":3,"text":"Remove Cordova Plugin"},{"id":"set-permissions","level":2,"text":"Set Permissions"},{"id":"cordova-plugin-preferences","level":2,"text":"Cordova Plugin preferences"},{"id":"additional-config-xml-fields","level":2,"text":"Additional Config.xml Fields"},{"id":"setting-scheme","level":2,"text":"Setting Scheme"},{"id":"removing-cordova","level":2,"text":"Removing Cordova"},{"id":"next-steps","level":2,"text":"Next Steps"}],"srcPath":"./docs-md/cordova/migrating-from-cordova-to-capacitor.md","content":"\n<h1 id=\"migrating-a-web-app-using-cordova-to-capacitor\">\n  \n  Migrating a Web App Using Cordova to Capacitor\n  \n</h1>\n<p class=\"intro\">There are several steps required to fully migrate a web app using Cordova over to Capacitor.</p>\n\n<blockquote>\nNote that it's recommended to work in a separate code branch when applying these changes.\n</blockquote>\n\n\n<h2 id=\"add-capacitor\">\n  <a class=\"heading-link\" href=\"#add-capacitor\"><ion-icon name=\"ios-link\"></ion-icon>\n  Add Capacitor\n  </a>\n</h2>\n<p>Begin by opening your project in a Terminal, then add Capacitor to <a href=\"/docs/getting-started\">a web app</a> or <a href=\"/docs/getting-started/with-ionic\">an Ionic app</a>. </p>\n<p>Next, open <code>config.xml</code> and find the <code>id</code> field in the widget element. In this example, it&#39;s <code>io.ionic.myapp</code>.</p>\n\n  <highlight-code-line >\n    <pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>widget</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>io.ionic.myapp<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">version</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>0.0.1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/ns/widgets<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>cdv</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://cordova.apache.org/ns/1.0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre>\n  </highlight-code-line>\n  <p>Also find the <code>Name</code> of your app:</p>\n\n  <highlight-code-line >\n    <pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>MyApp<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></code></pre>\n  </highlight-code-line>\n  <p>Now, initialize Capacitor with this app information:</p>\n\n  <highlight-code-line >\n    <pre class=\"language-bash\"><code class=\"language-bash\">npx cap init <span class=\"token punctuation\">[</span>appName<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>appId<span class=\"token punctuation\">]</span></code></pre>\n  </highlight-code-line>\n  <p>In this example, it would be <code>npx cap init MyApp io.ionic.myapp</code>. These values can be found in the newly created <code>capacitor.config.json</code> file.</p>\n\n<h3 id=\"build-your-web-app\">\n  <a class=\"heading-link\" href=\"#build-your-web-app\"><ion-icon name=\"ios-link\"></ion-icon>\n  Build your Web App\n  </a>\n</h3>\n<p>You must build your web project at least once before adding any native platforms.</p>\n<p>This ensures that the <code>www</code> folder that Capacitor has been <a href=\"/docs/basics/configuring-your-app/\">automatically configured</a> to use as the <code>webDir</code> in <code>capacitor.config.json</code> actually exists.</p>\n\n<h3 id=\"add-platforms\">\n  <a class=\"heading-link\" href=\"#add-platforms\"><ion-icon name=\"ios-link\"></ion-icon>\n  Add Platforms\n  </a>\n</h3>\n<p>Capacitor native platforms exist in their own top-level folders. Cordova&#39;s are located under <code>platforms/ios</code> or <code>platforms/android</code>.</p>\n\n  <highlight-code-line >\n    <pre class=\"language-bash\"><code class=\"language-bash\">npx cap <span class=\"token function\">add</span> ios\nnpx cap <span class=\"token function\">add</span> android</code></pre>\n  </highlight-code-line>\n  <p>Both android and ios folders at the root of the project are created. These are entirely separate native project artifacts that should be considered part of your app (i.e., check them into source control, edit them in their own IDEs, etc.). Additionally, any Cordova plugins that were previously added to the project via <code>npm install</code> (located under <code>dependencies</code> in <code>package.json</code>) are automatically installed by Capacitor into each new native project (minus any <a href=\"/docs/cordova/known-incompatible-plugins\">incompatible ones</a>):</p>\n\n  <highlight-code-line >\n    <pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"@ionic-native/camera\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^5.3.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"@ionic-native/core\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^5.3.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"@ionic-native/file\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^5.3.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"cordova-android\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"8.0.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"cordova-ios\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"5.0.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"cordova-plugin-camera\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"4.0.3\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"cordova-plugin-file\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"6.0.1\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre>\n  </highlight-code-line>\n  \n<h2 id=\"splash-screens-and-icons\">\n  <a class=\"heading-link\" href=\"#splash-screens-and-icons\"><ion-icon name=\"ios-link\"></ion-icon>\n  Splash Screens and Icons\n  </a>\n</h2>\n<p>If you&#39;ve previously created icon and splash screen images, they can be found in the top-level <code>resources</code> folder of your project. <a href=\"https://www.joshmorony.com/adding-icons-splash-screens-launch-images-to-capacitor-projects/\">Follow this guide</a> to move them over to each native project.</p>\n\n<h2 id=\"migrate-plugins\">\n  <a class=\"heading-link\" href=\"#migrate-plugins\"><ion-icon name=\"ios-link\"></ion-icon>\n  Migrate Plugins\n  </a>\n</h2>\n<p>Begin by auditing your existing Cordova plugins - it&#39;s possible that you may be able to remove ones that are no longer needed. </p>\n<p>Next, review all of Capacitor&#39;s <a href=\"/docs/apis\">core plugins</a> as well as <a href=\"/docs/community/plugins\">community plugins</a>. You may be able to switch to the Capacitor-equivalent Cordova plugin.</p>\n<p>Some plugins may not match functionality entirely, but based on the features you need that may not matter.</p>\n<p>Note that any plugins that are <a href=\"/docs/cordova/known-incompatible-plugins\">incompatible or cause build issues</a> are automatically skipped.</p>\n\n<h3 id=\"remove-cordova-plugin\">\n  <a class=\"heading-link\" href=\"#remove-cordova-plugin\"><ion-icon name=\"ios-link\"></ion-icon>\n  Remove Cordova Plugin\n  </a>\n</h3>\n<p>After replacing a Cordova plugin with a Capacitor one (or simply removing it entirely), uninstall the plugin then run the <code>sync</code> command to remove the plugin code from a native project:</p>\n\n  <highlight-code-line >\n    <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> uninstall cordova-plugin-name\nnpx cap <span class=\"token function\">sync</span> <span class=\"token punctuation\">[</span>android <span class=\"token operator\">|</span> ios<span class=\"token punctuation\">]</span></code></pre>\n  </highlight-code-line>\n  \n<h2 id=\"set-permissions\">\n  <a class=\"heading-link\" href=\"#set-permissions\"><ion-icon name=\"ios-link\"></ion-icon>\n  Set Permissions\n  </a>\n</h2>\n<p>By default, the entire initial permissions requested for the latest version of Capacitor are set for you in the default native projects for both iOS and Android. However, you may need to apply additional permissions manually by mapping between <code>plugin.xml</code> and required settings on iOS and Android. Consult the <a href=\"/docs/ios/configuration\">iOS</a> and <a href=\"/docs/android/configuration\">Android</a> configuration guides for info on how to configure each platform.</p>\n\n<h2 id=\"cordova-plugin-preferences\">\n  <a class=\"heading-link\" href=\"#cordova-plugin-preferences\"><ion-icon name=\"ios-link\"></ion-icon>\n  Cordova Plugin preferences\n  </a>\n</h2>\n<p>When <code>npx cap init</code> is run, Capacitor reads all the preferences in <code>config.xml</code> and port them to <code>capacitor.config.json</code> file. You can manually add more preferences to the <code>cordova.preferences</code> object too.</p>\n\n  <highlight-code-line >\n    <pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"cordova\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"preferences\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"DisableDeploy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"true\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"CameraUsesGeolocation\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"true\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n  </highlight-code-line>\n  \n<h2 id=\"additional-config-xml-fields\">\n  <a class=\"heading-link\" href=\"#additional-config-xml-fields\"><ion-icon name=\"ios-link\"></ion-icon>\n  Additional Config.xml Fields\n  </a>\n</h2>\n<p>You may be curious about how other elements from <code>config.xml</code> work in Capacitor apps.</p>\n<p>The Author element can be configured in <code>package.json</code>, but is not used by Capacitor or within your app:</p>\n\n  <highlight-code-line >\n    <pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>author</span> <span class=\"token attr-name\">email</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>email@test.com<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://ionicframework.com/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Ionic Framework Team<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>author</span><span class=\"token punctuation\">></span></span></code></pre>\n  </highlight-code-line>\n  <p>Most of the <code>allow-intent</code> values are either not used or there are <a href=\"/docs/basics/configuring-your-app/\">configurable alternatives</a> in <code>capacitor.config.json</code>.</p>\n\n  <highlight-code-line >\n    <pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>allow-intent</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://*/*<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>allow-intent</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://*/*<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>allow-intent</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>tel:*<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>allow-intent</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sms:*<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>allow-intent</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>mailto:*<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>allow-intent</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>geo:*<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre>\n  </highlight-code-line>\n  <p>iOS <code>edit-config</code> elements need to be <a href=\"/docs/ios/configuration\">configured in Info.plist</a>.</p>\n\n  <highlight-code-line >\n    <pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>edit-config</span> <span class=\"token attr-name\">file</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>*-Info.plist<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">mode</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>merge<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">target</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>NSCameraUsageDescription<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>string</span><span class=\"token punctuation\">></span></span>Used to take photos<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>string</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>edit-config</span><span class=\"token punctuation\">></span></span></code></pre>\n  </highlight-code-line>\n  <p>It&#39;s impossible to cover every <code>config.xml</code> element available. However, most questions relating to &quot;How do I configure X in Capacitor?&quot; should be thought of as &quot;How do I configure X in [platform] (iOS/Android)?&quot; when searching online for answers.</p>\n\n<h2 id=\"setting-scheme\">\n  <a class=\"heading-link\" href=\"#setting-scheme\"><ion-icon name=\"ios-link\"></ion-icon>\n  Setting Scheme\n  </a>\n</h2>\n<p>When using Ionic with Cordova, your app uses <code>cordova-plugin-ionic-webview</code> by default, which on iOS uses <code>ionic://</code> scheme for serving the content. Capacitor apps use <code>capacitor://</code> as default scheme on iOS. This means that using a origin-binded Web API like LocalStorage, will result in a loss of data as the origin is different. This can be fixed by changing the scheme that is used for serving the content:</p>\n\n  <highlight-code-line >\n    <pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"server\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"iosScheme\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ionic\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n  </highlight-code-line>\n  \n<h2 id=\"removing-cordova\">\n  <a class=\"heading-link\" href=\"#removing-cordova\"><ion-icon name=\"ios-link\"></ion-icon>\n  Removing Cordova\n  </a>\n</h2>\n<p>Once you&#39;ve tested that all migration changes have been applied and the app is working well, Cordova can be removed from the project. Delete <code>config.xml</code> as well as the <code>platforms</code> and <code>plugins</code> folders. Note that you don&#39;t technically have to remove Cordova, since Capacitor works alongside it. In fact, if you plan to continue using Cordova plugins or think you may in the future, you can leave the Cordova assets where they are.</p>\n\n<h2 id=\"next-steps\">\n  <a class=\"heading-link\" href=\"#next-steps\"><ion-icon name=\"ios-link\"></ion-icon>\n  Next Steps\n  </a>\n</h2>\n<p>This is just the beginning of your Capacitor journey. Learn more about <a href=\"/docs/cordova/using-cordova-plugins\">using Cordova plugins</a> in a Capacitor project or more details on the Capacitor <a href=\"/docs/basics/workflow\">development workflow</a>.</p>\n"}